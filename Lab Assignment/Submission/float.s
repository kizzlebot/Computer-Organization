##################################################################
#   Data
##################################################################
.data
prompt: .asciiz  "\n\nEnter a float: "  # Prompt asking for user input
newLine: .asciiz "\n"								# Newline character
meanVal: .asciiz "\nMean: "								# Newline characte
floatSet1: .float 0.0, 42.2, 78.8, 129.4, 133.0, 0.0, 42.2, 78.8, 129.4, 133.0, 0.0  # A eleven-space float array initially filled with whitespace
floatSet2: .float 0.0, 42.2, 78.8, 129.4, 133.0, 0.0, 42.2, 78.8, 129.4, 133.0, 0.0
##################################################################
#   Text
##################################################################
.text 


####****************************************************************************************************####
#####   Procedure: Main
#####   Argument:  n/a
#####   Info:      Asks user for input of ten floats, calculates mean, calculates dot product then exits
####****************************************************************************************************####
main:
	# Initialize incrementors
	move $t0, $zero
	move $t1, $zero
	addi $t7, $zero,10
	
	############################################################
	#  Read floatSet1
	############################################################
	la $a1,floatSet1 # Load address of floatSet1into syscall argument a1
	jal read         # Jump to read function   
	#jal printArray
	############################################################
	#  Read floatSet2
	############################################################
	#la $a1,floatSet2 # Load address of floatSet1into syscall argument a1
	#jal read         # Jump to read function   
	#jal printArray

	############################################################
	#  Calculate Mean 
	############################################################
	la $a1,floatSet1
	jal mean
	
	

	############################################################
	#  Calculate Dot Product
	############################################################
	#la $a1,floatSet1
	#jal dotProd
	#jal printCalc


	j exit	
#!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!#
#!!!!!!!!!!!!!!!!!!!!!!!!! end main !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!#
#!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!#

####****************************************************************************************************####
##### Function:    mean
##### Argument:    $a1 (baseaddress), $t0 (lower bound), $t7 (upperbound)
##### Returns :    
##### Description: calculates the mean and places in array[10]
####****************************************************************************************************####
mean:
	mtc1 $zero,$f1
	meanSummate:
		# t2 = baseAddr+offset
		add $t2,$a1,$t1 
		beq $t0,$t7,meanDivide
		
		
		l.s $f0,0($t2)  
		add.s $f1,$f1,$f0


		addi $t0,$t0,1
		sll $t1,$t0,2
		j meanSummate
	meanDivide:
		mtc1  $t7,$f5
		div.s $f1,$f1,$f5
		s.s $f1,0($t2)		
		####################################
		# Print prompt label
		####################################	
	 	la $a0, meanVal   # Load address of prompt from memory into $a0
		li $v0, 4        # Load Opcode: 4 (print string) 
		syscall          # Init syscall
		####################################
		# Print what is in f12
		####################################	
		l.s $f12,0($t2)
		li $v0, 2
		syscall


		j done

####****************************************************************************************************####
##### Function:    read  
##### Argument:    $a1 (baseaddress), $t0 (lower bound), $t7 (upperbound)
##### Description: Reads array starting at baseaddress $a1 ten times 
####****************************************************************************************************####
read:
	beq $t0,$t7,done
	# t3 = baseAddr+offset
	add $t2,$a1,$t1 
############################################################################################################

	############################################################
	#  Print Prompt
	############################################################
 	la $a0, prompt   # Load address of prompt from memory into $a0
	li $v0, 4        # Load Opcode: 4 (print string) 
	syscall          # Init syscall

		
	#############################################
	#  Read User Input into address of f0
	#############################################
	li $v0,6          # Load Opcode: 6 (Read float)
	syscall

	#############################################
	#  Store User Input into address of floatSet1 index
	#############################################
	s.s $f0,0($t2)

############################################################################################################
	addi $t0,$t0,1
	sll $t1,$t0,2
	j read
####****************************************************************************************************####
#### read end ##############################################################################################
####****************************************************************************************************####




####****************************************************************************************************####
##### Function:    printArray
##### Argument:    $a1 (baseaddress)
##### Description: Print array starting at baseaddress $a1 ten times 
####****************************************************************************************************####
printArray:
	beq $t0,$t7,done
	# t2 = baseAddr+offset
	add $t2,$a1,$t1
############################################################################################################

	####################################
	# Print a index
	####################################	
	l.s $f12,0($t2)
	li $v0, 2
	syscall


	####################################
	# Print a new line
	####################################
	la $a0,newLine
	li $v0,4
	syscall 

############################################################################################################
	addi $t0,$t0,1
	sll $t1,$t0,2
	j printArray
####****************************************************************************************************####
######### Print End ########################################################################################
####****************************************************************************************************####


####****************************************************************************************************####
##### Function:    done  
##### Argument:    n/a    
##### Description: Resets incrementors and jumps back to return address
####****************************************************************************************************####
done:
	# Reset incrementors
	move $t0,$zero
	move $t1,$zero
	jr $ra 
####****************************************************************************************************####
######### done End #########################################################################################
####****************************************************************************************************####
exit:
